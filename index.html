<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jain Spiritual Audios</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #d1d5db; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #9ca3af; }

        /* Audio Player transitions */
        #audioPlayerContainer {
            transition: all 0.4s ease-in-out;
            transform: translateY(100%);
            max-height: 80px; /* Default height */
        }
        #audioPlayerContainer.visible {
            transform: translateY(0);
        }
        #audioPlayerContainer.expanded {
            max-height: 300px; /* Expanded height for script */
        }
        
        /* Script display area */
        #scriptContent {
            height: 0;
            opacity: 0;
            overflow-y: auto;
            transition: all 0.4s ease-in-out;
            transition-delay: 0.1s;
        }
        #audioPlayerContainer.expanded #scriptContent {
            height: 180px; /* Adjust as needed */
            opacity: 1;
        }

        /* Active navigation tab */
        .nav-btn.active {
            border-bottom-color: #2563eb;
            color: #2563eb;
            font-weight: 600;
        }

        /* Favorite button style */
        .favorite-btn {
            fill: #d1d5db; /* Gray/unselected */
            transition: all 0.2s ease;
        }
        .favorite-btn:hover {
            fill: #fcd34d; /* Yellow on hover */
        }
        .favorite-btn.favorited {
            fill: #f59e0b; /* Amber/selected */
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 flex flex-col min-h-screen">

    <!-- Header -->
    <header class="bg-white shadow-md sticky top-0 z-20">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-20">
                <div class="flex items-center space-x-3">
                    <!-- Jain Symbol SVG -->
                    <svg class="w-10 h-10 text-blue-600" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M50 0 L100 50 L50 100 L0 50 Z" fill="#F0F0F0" stroke="#000" stroke-width="1"/>
                        <circle cx="50" cy="15" r="5" fill="#FF9933"/>
                        <path d="M40 25 H60 M50 25 V45" stroke="#000" stroke-width="2"/>
                        <path d="M30 50 C40 40, 60 40, 70 50" stroke="#138808" stroke-width="2" fill="none"/>
                        <path d="M30 50 C40 60, 60 60, 70 50" stroke="#138808" stroke-width="2" fill="none"/>
                        <circle cx="50" cy="70" r="10" stroke="#000080" stroke-width="2" fill="none"/>
                        <path d="M50 85 L60 95 L40 95 Z" fill="#FF9933"/>
                    </svg>
                    <h1 class="text-2xl font-bold text-blue-700">Jain Audios</h1>
                </div>
                <!-- Search Bar -->
                <div class="relative w-full max-w-xs">
                    <input type="text" id="searchInput" placeholder="Search audios..." class="w-full pl-10 pr-4 py-2 border rounded-full text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                        <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" />
                        </svg>
                    </div>
                </div>
            </div>
        </div>
        <!-- Category Navigation -->
        <nav class="bg-white shadow-inner">
            <div id="nav-container" class="container mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-start space-x-4 sm:space-x-8 overflow-x-auto pb-px">
                 <!-- Nav buttons will be dynamically inserted here -->
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main id="main-content" class="container mx-auto p-4 sm:p-6 lg:p-8 flex-grow">
        <!-- Content sections will be dynamically inserted here -->
    </main>
    
    <!-- Footer -->
    <footer class="bg-gray-200 text-gray-700 text-sm text-center py-6">
        <div class="container mx-auto">
            <p class="font-bold">Made by TechSon Inc.</p>
            <p>Contact:</p>
            <p>Phone: +91 9000090000 | Email: abc@mail.com</p>
        </div>
    </footer>

    <!-- Fixed Audio Player at the bottom -->
    <div id="audioPlayerContainer" class="fixed bottom-0 left-0 right-0 bg-white shadow-2xl rounded-t-lg z-30 p-4 border-t border-gray-200">
        <!-- Script Area -->
        <div id="scriptContent" class="mb-4 p-3 bg-gray-100 rounded-md border text-sm text-gray-700">
            <!-- Script will be injected here -->
        </div>
        <!-- Player Controls -->
        <div class="container mx-auto flex items-center justify-between">
            <div>
                <h3 id="currentTrackTitle" class="font-bold text-lg">Select an audio</h3>
                <p id="currentTrackArtist" class="text-gray-500 text-sm">Jain Spiritual Audios</p>
            </div>
            <audio id="audioPlayer" controls class="w-1/2 sm:w-auto">
                Your browser does not support the audio element.
            </audio>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- DATA FOR ALL CATEGORIES ---
            const audioData = {
                pachchkaan: [
                    { title: 'Navkarsi Pachchkaan', description: 'For fasting from sunrise until 48 minutes after.', audioSrc: 'https://architmodi513.github.io/Jain/audios/Navkarsi.m4a', script: 'Uggae sure namukkara-sahiam...' },
                    { title: 'Porsi Pachchkaan', description: 'Fasting for one prahar (approx. 3 hours) after sunrise.', audioSrc: '#', script: 'Sure uggae porisim...' },
                    { title: 'Chauvihar Upvas', description: 'A complete fast for the day without food or water.', audioSrc: 'https://architmodi513.github.io/Jain/audios/Chauvihaar-Upwas.m4a', script: 'Chauviharam pi aharam...' },
                    { title: 'Tivihar Upvas', description: 'A fast where only boiled water is consumed.', audioSrc: '#', script: 'Placeholder script for Tivihar Upvas...' },
                    { title: 'Ekasanu', description: 'Eating a single meal in one sitting during the day.', audioSrc: '#', script: 'Placeholder script for Ekasanu...' },
                    { title: 'Biyasanu', description: 'Eating two meals in two sittings during the day.', audioSrc: '#', script: 'Placeholder script for Biyasanu...' },
                    { title: 'Ayambil', description: 'Eating boiled, unseasoned food once a day.', audioSrc: '#', script: 'Placeholder script for Ayambil...' },
                    { title: 'Raatri Bhojan Tyag', description: 'Oath to abstain from eating after sunset.', audioSrc: '#', script: 'Placeholder script for Raatri Bhojan Tyag...' }
                ],
                bhajans: [
                    { title: 'Mahavir Swami Bhajan', description: 'A devotional song for Lord Mahavir.', audioSrc: '#', script: 'Hey Mahavir, karu Vandan...'},
                    { title: 'Navkar Mantra Jaap', description: 'Chanting of the sacred Navkar Mantra.', audioSrc: '#', script: 'Namo Arihantanam, Namo Siddhanam...'}
                ],
                sutras: [
                    { title: 'Bhaktamar Stotra', description: 'A famous Jain hymn composed by Acharya Manatunga.', audioSrc: '#', script: 'Bhaktamara-pranata-mauli-mani-prabhanam...'}
                ],
                lectures: [{ title: 'Lecture on Ahimsa', description: 'Discourse on the principle of non-violence.', audioSrc: '#', script: 'Ahimsa Paramo Dharma...' }],
                mangalik: [{ title: 'Mangal Path', description: 'Auspicious verses for blessings and well-being.', audioSrc: '#', script: 'Chattari Mangalam...'}],
                pratikraman: [{ title: 'Devasi Pratikraman', description: 'The ritual of evening repentance.', audioSrc: '#', script: 'Ichchhami khamasamano...'}],
                samayik: [{ title: 'Samayik Path', description: 'The practice of equanimity for 48 minutes.', audioSrc: '#', script: 'Karemi Bhante Samaiyam...'}],
                favorites: [] // This will be populated from localStorage
            };

            const mainContent = document.getElementById('main-content');
            const navContainer = document.getElementById('nav-container');
            const audioPlayerContainer = document.getElementById('audioPlayerContainer');
            const audioPlayer = document.getElementById('audioPlayer');
            const currentTrackTitle = document.getElementById('currentTrackTitle');
            const scriptContent = document.getElementById('scriptContent');
            const searchInput = document.getElementById('searchInput');
            let favorites = JSON.parse(localStorage.getItem('jainAudioFavorites')) || [];
            let currentTab = 'pachchkaan';

            // --- Function to Create Audio Cards ---
            function createAudioCard(item, isFavorited) {
                const favoritedClass = isFavorited ? 'favorited' : '';
                return `
                    <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-xl transition-shadow duration-300">
                        <div class="p-6 flex flex-col h-full">
                            <div class="flex justify-between items-start">
                                <h3 class="text-xl font-semibold mb-2 pr-2">${item.title}</h3>
                                <button class="favorite-btn p-1 flex-shrink-0" data-title="${item.title}">
                                    <svg class="w-6 h-6 ${favoritedClass}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>
                                </button>
                            </div>
                            <p class="text-gray-600 mb-4 flex-grow">${item.description}</p>
                            <button data-title="${item.title}" class="play-btn w-full mt-auto bg-green-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-600 transition-colors duration-300">
                                Play Audio
                            </button>
                        </div>
                    </div>
                `;
            }

            // --- Function to Render a Grid of Cards ---
            function renderGrid(container, items) {
                if (items.length === 0) {
                    container.innerHTML = `<p class="text-gray-500 col-span-full">No items found.</p>`;
                    return;
                }
                container.innerHTML = items.map(item => {
                    const isFavorited = favorites.includes(item.title);
                    return createAudioCard(item, isFavorited);
                }).join('');
            }
            
            // --- Function to Change Active Tab ---
            function setActiveTab(key) {
                currentTab = key;
                searchInput.value = ''; // Clear search on tab change
                document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
                document.querySelector(`.nav-btn[data-target="${key}"]`).classList.add('active');
                
                document.querySelectorAll('.category-section').forEach(sec => sec.style.display = 'none');
                document.getElementById(`${key}-section`).style.display = 'block';

                if (key === 'favorites') {
                    const favoriteItems = getAllAudioItems().filter(item => favorites.includes(item.title));
                    renderGrid(document.getElementById('favoritesGrid'), favoriteItems);
                }
            }

            // --- Get all audio items from all categories ---
            function getAllAudioItems() {
                return Object.keys(audioData)
                    .filter(k => k !== 'favorites')
                    .flatMap(key => audioData[key]);
            }
            
            // --- Search Functionality ---
            function handleSearch() {
                const searchTerm = searchInput.value.toLowerCase();
                const allItems = getAllAudioItems();
                const results = allItems.filter(item => 
                    item.title.toLowerCase().includes(searchTerm) || 
                    item.description.toLowerCase().includes(searchTerm)
                );

                // Hide all tab sections and show a unified search result view
                document.querySelectorAll('.category-section').forEach(sec => sec.style.display = 'none');
                let searchSection = document.getElementById('search-section');
                if (!searchSection) {
                    searchSection = createSection('search', 'Search Results', `Showing results for "${searchInput.value}"`);
                    mainContent.appendChild(searchSection);
                }
                searchSection.querySelector('h2').textContent = 'Search Results';
                searchSection.querySelector('p').textContent = `Showing results for "${searchInput.value}"`;
                searchSection.style.display = 'block';
                renderGrid(document.getElementById('searchGrid'), results);
                
                if (!searchTerm) {
                    searchSection.style.display = 'none';
                    setActiveTab(currentTab);
                }
            }

            // --- Function to Create a Content Section ---
            function createSection(key, title, description) {
                const section = document.createElement('section');
                section.id = `${key}-section`;
                section.classList.add('category-section');
                section.style.display = 'none';
                section.innerHTML = `
                    <h2 class="text-3xl font-bold mb-2">${title}</h2>
                    <p class="text-gray-600 mb-6">${description}</p>
                    <div id="${key}Grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"></div>
                `;
                return section;
            }

            // --- Initialize UI ---
            const categoryMeta = {
                pachchkaan: { title: 'Pachchkaan', desc: 'Select a Pachchkaan below to listen to the audio oath for your fast.'},
                bhajans: { title: 'Bhajans', desc: 'Listen to devotional songs and hymns.'},
                sutras: { title: 'Sutras', desc: 'Listen to sacred scriptures and texts.'},
                lectures: { title: 'Lectures', desc: 'Listen to spiritual discourses and pravachans.'},
                mangalik: { title: 'Mangalik', desc: 'Listen to auspicious recitations for blessings.'},
                pratikraman: { title: 'Pratikraman', desc: 'Audio for the ritual of repentance.'},
                samayik: { title: 'Samayik', desc: 'Audio for the practice of equanimity.'},
                favorites: { title: 'Favorites', desc: 'Your saved audios for quick access.'}
            };
            
            for (const key in categoryMeta) {
                const navBtn = document.createElement('button');
                navBtn.className = 'nav-btn py-4 px-1 border-b-2 border-transparent text-gray-500 hover:text-blue-600 hover:border-blue-300 transition-colors duration-200 text-sm sm:text-base whitespace-nowrap';
                navBtn.textContent = categoryMeta[key].title;
                navBtn.dataset.target = key;
                navContainer.appendChild(navBtn);
                
                const section = createSection(key, categoryMeta[key].title, categoryMeta[key].desc);
                mainContent.appendChild(section);

                if (key !== 'favorites') {
                    renderGrid(document.getElementById(`${key}Grid`), audioData[key]);
                }
            }
            
            // --- Event Listeners ---
            navContainer.addEventListener('click', (e) => {
                if(e.target.classList.contains('nav-btn')) setActiveTab(e.target.dataset.target);
            });
            searchInput.addEventListener('input', handleSearch);

            mainContent.addEventListener('click', function(e) {
                const playBtn = e.target.closest('.play-btn');
                const favBtn = e.target.closest('.favorite-btn');

                if (playBtn) {
                    const title = playBtn.dataset.title;
                    const item = getAllAudioItems().find(i => i.title === title);
                    if (item) {
                        if (item.audioSrc && item.audioSrc !== '#') {
                            audioPlayer.src = item.audioSrc;
                            currentTrackTitle.textContent = item.title;
                            scriptContent.textContent = item.script || 'No script available for this audio.';
                            audioPlayer.play();
                            audioPlayerContainer.classList.add('visible', 'expanded');
                        } else {
                            alert('Audio for "' + title + '" is not available yet.');
                        }
                    }
                }

                if (favBtn) {
                    const title = favBtn.dataset.title;
                    const starIcon = favBtn.querySelector('svg');
                    const index = favorites.indexOf(title);
                    if (index > -1) {
                        favorites.splice(index, 1); // Remove from favorites
                        starIcon.classList.remove('favorited');
                    } else {
                        favorites.push(title); // Add to favorites
                        starIcon.classList.add('favorited');
                    }
                    localStorage.setItem('jainAudioFavorites', JSON.stringify(favorites));

                    // Refresh favorites view if it's the current tab
                    if (currentTab === 'favorites') {
                         const favoriteItems = getAllAudioItems().filter(item => favorites.includes(item.title));
                         renderGrid(document.getElementById('favoritesGrid'), favoriteItems);
                    }
                }
            });

            // --- Set Initial State ---
            setActiveTab('pachchkaan');
        });
    </script>

</body>
</html>

